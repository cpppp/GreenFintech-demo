# 预制菜企业绿色贷款智能合约

## 项目简介

基于区块链技术的预制菜企业绿色贷款管理系统，旨在通过智能合约自动化管理企业环保表现评估、绿色积分计算以及绿色优惠贷款发放流程。该系统鼓励预制菜企业提高环保表现，实现绿色生产转型。

## 核心功能

### 1. 企业管理
- 企业注册与身份验证
- 企业信息管理
- 管理员权限控制

### 2. 绿色表现数据管理
- 企业绿色表现数据上传
- 管理员数据核验
- 绿色表现记录查询

### 3. 积分系统
- 基于绿色表现自动计算积分
- 积分查询与扣减
- 绿色贷款资格判定

### 4. 贷款管理
- 正常贷款与绿色优惠贷款申请
- 自动贷款审批与发放
- 贷款利率动态调整
- 贷款记录管理

## 技术架构

- **智能合约语言**: Solidity ^0.8.0
- **区块链平台**: 兼容以太坊虚拟机(EVM)的区块链
- **许可类型**: MIT License

## 合约主要功能详解

### 1. 企业注册与认证

企业通过提交基本信息进行注册，经管理员审核通过后获得完整功能权限。系统使用以太坊地址作为企业唯一标识，并安全存储企业信息。

### 2. 绿色表现评估机制

企业上传基准线数据与实际表现数据，系统计算环保改进百分比。当改进达到预设阈值（默认15%）时，企业获得绿色积分。

### 3. 绿色积分系统

- 绿色积分用于衡量企业环保表现
- 积分达到一定标准（默认100分）可申请绿色优惠贷款
- 绿色数据有有效期限制（默认90天），确保数据时效性

### 4. 差异化贷款利率

- 正常贷款利率：默认4.5%
- 绿色优惠贷款利率：默认4.3%
- 管理员可根据市场情况调整利率参数

## 部署与使用

### 部署要求

- Solidity编译器 0.8.0 或更高版本
- 以太坊或兼容EVM的区块链网络
- 足够的gas费用

### 部署步骤

1. 使用Solidity编译器编译合约
2. 部署到目标区块链网络
3. 部署者自动成为合约管理员
4. 根据需求调整合约参数

### 管理操作

- 设置贷款利率：`setLoanRates(uint256 _normalRate, uint256 _greenRate)`
- 设置积分规则：`setPointRules(uint256 _threshold, uint256 _minPoints)`
- 设置贷款参数：`setLoanParameters(uint256 _amount, uint256 _validPeriod)`
- 审核企业：`verifyEnterprise(address _enterprise)`
- 核验绿色数据：`verifyGreenData(address _enterprise, uint256 _dataId)`

### 企业操作

- 注册企业：`registerEnterprise(string calldata _name, string calldata _socialCreditCodeHash)`
- 上传绿色数据：`uploadGreenData(uint256 _baseline, uint256 _actualData, string calldata _dataType)`
- 查询贷款资格：`canApplyGreenLoan()`
- 申请贷款：`applyForLoan(bool _isGreenLoan)`

## 项目结构

```
├── GreenLoanContract.sol  # 主智能合约文件
├── demo.docx              # 演示文档
└── README.md              # 项目说明文档（当前文件）
```

## 安全考虑

- 使用Solidity 0.8.0及以上版本，利用内置溢出保护
- 实现严格的权限控制机制
- 使用事件记录所有关键操作，便于审计
- 避免浮点数运算，使用整数比例表示百分比

## 注意事项

1. 本合约为Demo版本，进行了功能简化，实际部署前应进行全面安全审计
2. 建议在测试网络充分测试后再部署到主网
3. 企业统一社会信用代码以哈希形式存储，确保信息安全
4. 合约参数（利率、阈值等）可根据实际业务需求灵活调整

## 许可证

本项目采用MIT许可证 - 详情请参阅LICENSE文件
